/*
* videojs-ga - v0.4.2 - 2015-12-11
* Copyright (c) 2015 Michael Bensoussan
* Licensed MIT
*/
(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};videojs.plugin("ga",function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;return null==b&&(b={}),c={},this.options()["data-setup"]&&(m=JSON.parse(this.options()["data-setup"]),m.ga&&(c=m.ga)),d=["loaded","percentsPlayed","start","end","seek","play","pause","resize","volumeChange","error","fullscreen"],i=b.eventsToTrack||c.eventsToTrack||d,p=b.percentsPlayedInterval||c.percentsPlayedInterval||10,g=b.eventCategory||c.eventCategory||"Video",h=b.eventLabel||c.eventLabel,b.debug=b.debug||!1,o=[],v=u=0,w=!1,k=function(){h||(h=this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,"")),a.call(i,"loadedmetadata")>=0&&x("loadedmetadata",!0)},z=function(){var b,c,d,e,f,g,h,j,k;for(b=Math.round(this.currentTime()),e=t(b),d=Math.round(this.duration()),h=Math.round(b/d*100),c=!1,j=Math.round(d/(100/p)),g=k=0;99>=k;g=k+=p)h>=g&&a.call(o,g)<0&&(a.call(i,"start")>=0&&0===g&&h>0?x("start",!0):a.call(i,"percentsPlayed")>=0&&0!==h&&(f=l(g,2),this.seeking()?x("seeked past "+f+"%",!0):c===!1?(x("played "+f+"% ( "+e+" )",!0,j),c=!0):x("scrubbed past "+f+"%",!0)),h>0&&o.push(g));a.call(i,"seek")>=0&&(v=u,u=b,Math.abs(v-u)>1&&(w=!0,x("seek start",!1,0),x("seek end",!1,0),v>u&&r(u,v,d)))},r=function(b,c,d){var e,f,g,h,i,j;for(f=Math.round(b/d*100),e=Math.round(c/d*100),j=[],g=i=0;99>=i;g=i+=p)g>f&&e>g&&a.call(o,g)>=0?(h=o.indexOf(g),j.push(o.splice(h,1))):j.push(void 0);return j},e=function(){x("end",!0)},q=function(){var a;a=Math.round(this.currentTime()),x("play",!0,a),w=!1},n=function(){var a,b;a=Math.round(this.currentTime()),b=Math.round(this.duration()),a===b||w||x("pause",!1,a)},A=function(){var a;a=this.muted()===!0?0:this.volume(),x("volume change",!1,a)},s=function(){x("resize - "+this.width()+"*"+this.height(),!0)},f=function(){var a;a=Math.round(this.currentTime()),x("error",!0,a)},j=function(){var a;a=Math.round(this.currentTime()),("function"==typeof this.isFullscreen?this.isFullscreen():void 0)||("function"==typeof this.isFullScreen?this.isFullScreen():void 0)?x("enter fullscreen",!1,a):x("exit fullscreen",!1,a)},l=function(a,b){var c,d;return c=b-1,d=a<Math.pow(10,c)?y("0",c)+a:""+a},y=function(a,b){var c;for(c="";b>0;)1&b&&(c+=a),b>>>=1,a+=a;return c},t=function(a){var b,c,d,e;return a=Number(a),b=Math.floor(a/3600),c=Math.floor(a%3600/60),e=Math.floor(a%3600%60),d=b>0?l(b,2)+":"+l(c,2)+":"+l(e,2):l(c,2)+":"+l(e,2)},x=function(a,c,d){window.ga?ga("send","event",{eventCategory:g,eventAction:a,eventLabel:h,eventValue:d,nonInteraction:c}):window._gaq?_gaq.push(["_trackEvent",g,a,h,d,c]):b.debug&&console.log("Google Analytics not detected")},this.ready(function(){return this.on("loadedmetadata",k),this.on("timeupdate",z),a.call(i,"end")>=0&&this.on("ended",e),a.call(i,"play")>=0&&this.on("play",q),a.call(i,"pause")>=0&&this.on("pause",n),a.call(i,"volumeChange")>=0&&this.on("volumechange",A),a.call(i,"resize")>=0&&this.on("resize",s),a.call(i,"error")>=0&&this.on("error",f),a.call(i,"fullscreen")>=0?this.on("fullscreenchange",j):void 0}),{sendbeacon:x}})}).call(this);